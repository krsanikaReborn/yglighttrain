<meta charset="utf-8">

    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no" name="viewport" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-1.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://youninsubway.s3.amazonaws.com/en/css/common.css">

    <link rel="stylesheet" href="https://youninsubway.s3.amazonaws.com/en/css/sub.css">
    <link rel="stylesheet" href="https://youninsubway.s3.amazonaws.com/en/css/newtable.css">




    <div id="navs">
        <div class="nav_c roll">
            <nav id="topmenu" class="navbar navbar-expand-md navbar-dark fixed_top">
                <a class="nav-link brand" href="/"><img src="https://youninsubway.s3.amazonaws.com/en/images/eng_logo.png"
                        alt="Logo" class="logo "></a>
                <div class="collapse navbar-collapse mx-auto" id="collapsibleNavbar">
                    <ul class="navbar-nav justify-content-end w-100 nav_center">
                        <li class="nav-item bd_leftSmall">
                            <a class="nav-link " href="/page/?M2_IDX=29236">Line Map</a>
                        </li>
                        <li class="nav-item bd_leftSmall">
                            <a class="nav-link " href="/page/?M2_IDX=29240">Fare Guide</a>
                        </li>
                        <li class="nav-item bd_leftSmall">
                            <a class="nav-link " href="/page/?M2_IDX=29246">Safety Etiquette</a>
                        </li>
                        <li class="nav-item bd_leftSmall">
                            <a class="nav-link " href="/page/?M2_IDX=29247">Lost & Found Center</a>
                        </li>
                        <li class="nav-item bd_leftSmall mr-5">
                            <a class="nav-link " href="/page/?M2_IDX=29248">Company</a>
                        </li>
                    </ul>
                    <ul class="navbar-nav mr-auto nav_right">
                        <li class="d-flex lang">
                            <a href="https://ever-line.co.kr/"><img src="https://youninsubway.s3.amazonaws.com/en/images/flag/KR.png"
                                    class="img-fluid">
                                    한국어</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>

        <!--<div id="submenu" class="container-fluid sub_menu fixed_top02  text-center" style="display: none;">-->
            <div id="submenu" class="container-fluid sub_menu fixed_top02  text-center" style="display: none;">
            <!-- <div class="mw_1296 ab">
                <div class="bg_gray border_r6 sub_menu_ab text-left mt_30px">
                    <p class="color_point fw_600 fs_18">문화행사</p>
                    <p class="color_5B5B5B">용인문화재단, 에버라인과 함께하는
                        ‘YOUNG! 아트로드’ 성료</p>
                    <p class="color_989898">2019.11.08</p>
                </div>
                <div class="bg_gray border_r6 sub_menu_ab text-left mt_20px">
                    <p class="color_point fw_600 fs_18">Fare Guide</p>
                    <p class="color_5B5B5B">개인정보처리방칭 개정(안) 공고문</p>
                    <p class="color_989898">2019.11.08</p>
                </div>
            </div> -->
            <div class="container  sub_menu_c mw_600 ">
                <div class="row">
                    <div class="col pd_42 addBC">
                        <div class=""><a href="/page/?M2_IDX=29236">Line Map</a></div>
                        <div class=""><a href="/page/?M2_IDX=29237">Operation Time</a></div>
                    </div>
                    <div class="col pd_42 addBC">
                        <div class=""><a href="/page/?M2_IDX=29240">Fare Guide</a></div>
                    </div>
                    <div class="col pd_42 addBC">
                        <div class=""><a href="/page/?M2_IDX=29246">Safety Etiquette</a></div>
                    </div>
                    <div class="col pd_42 addBC">
                        <div class=""><a href="/page/?M2_IDX=29247">Lost & Found Center</a></div>
                    </div>
                    <div class="col pd_42 addBC">
                        <div class=""><a href="/page/?M2_IDX=29248">CEO Greeting</a></div>
                        <div class=""><a href="/page/?M2_IDX=29249">Company Summary</a></div>
                        <div class="lineheight15"><a href="/page/?M2_IDX=29349">CEO Greeting (Operation Company)</a></div>
                        <div class="lineheight15"><a href="/page/?M2_IDX=29350">Company Summary  (Operation Company)</a></div>
    
                    </div>
                </div>
            </div>
        </div>
        <a href="#" class="hamburger-button">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </a>
    </div>

    <!--------------------------햄붜거------------------------------------------------------------------------------------------------------------------------------------------------------------------>


    <div class="overlay">
        <nav class="hamburger_menu">
            <dl>
                <dt>
                    <span>Line Map</span>
                </dt>
                <dd>
                    <a href="/page/?M2_IDX=29236">Line Map</a><br>
                    <a href="/page/?M2_IDX=29237">Operation Time</a><br>
                </dd>
                <dt><span>Fare Guide</span></dt>
                <dd>
                    <a href="/page/?M2_IDX=29240">Fare Guide</a><br>
                </dd>
                <dt><span>Safety Etiquette</span></dt>
                <dd>
                    <a href="/page/?M2_IDX=29246">Safety Etiquette</a><br>
                </dd>
                <dt><span>Lost & Found Center</span></dt>
                <dd>
                    <a href="/page/?M2_IDX=29247">Lost & Found Center</a><br>
                </dd>
                <dt><span>Company</span></dt>
                <dd>
                    <a href="/page/?M2_IDX=29248">CEO Greeting</a><br>
                    <a href="/page/?M2_IDX=29249">Company Summary</a><br>
                    <a href="/page/?M2_IDX=29349">CEO Greeting (Operation Company)</a><br>
                    <a href="/page/?M2_IDX=29350">Company Summary  (Operation Company)</a><br>
                </dd>
                <dt><span>  <a href="https://ever-line.co.kr/"><img src="https://youninsubway.s3.amazonaws.com/en/images/flag/KR.png" class="img-fluid">
                        한국어</a></span></dt>
                
            </dl>
        </nav>
    </div>
    <div class="m_mt_80"></div>

    <script>
        let subMenu = document.getElementById("submenu");
        let apikey = 'gezk9simbs47jw27x2gtc0ae5roftgv0';


        $(() => {
            //로그인처리
            user.info();

            //메뉴 스크립트
            $('.addBC').hover(function () {
                let children = $(this).children().children();
            }, function () {
                let children = $(this).children().children();
            });

            $('.hamburger-button').on('click', function (event) {
                event.preventDefault();
                $(this).toggleClass('active');
                $('.overlay').toggleClass('visible');
            });


            if ($(window).width() > 1000) {
                $('.nav_center li').hover(function () {
                    subMenu.style.display = "block";
                    window.event.pageY
                });
                window.addEventListener('mousemove', function (event) {
                    if (subMenu.style.display == 'block' && event.pageY > 460) {
                        submenu.style.display = 'none';
                    }
                });

            }
            
            $(window).scroll(function(event){
                $('.hamburger-button.active').tigger('click');
                console.log('scroll!');
                // didScroll = true;
            });

        });
        //ready End

        var acodian = {
            click: function (target) {
                var _self = this,
                    $target = $(target);
                $target.on('click', function () {
                    var $this = $(this);
                    if ($this.next('dd').css('display') == 'none') {
                        $('dd').slideUp();
                        _self.onremove($target);

                        $this.addClass('on');
                        $this.next().slideDown();
                    } else {
                        $('dd').slideUp();
                        _self.onremove($target);

                    }
                });
            },
            onremove: function ($target) {
                $target.removeClass('on');
            }

        };
        acodian.click('dt');

        var user = {
            info: () => {
                let pr = $.ajax({
                    url: '/api/info.nx',
                    data: { "KEY": apikey, "SESS_ID": utils.getSessionId(), "param": "id,name,level" },
                    type: "POST",
                    async: false,
                }).done(function (data) {
                    if (data.success === true) {
                        console.log(data);
                        $('.logOff').addClass('d-none');
                        $('.logOn').removeClass('d-none');
                    } else {
                        console.log('login Nothing!');
                        $('.logOff').removeClass('d-none');
                        $('.logOn').addClass('d-none');
                    }
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    console.log('login Error!' + textStatus + " : " + errorThrown);
                });
                return pr;

            }
        }
        var utils = {
            getParamFromUrl: (key) => {
                let search = location.search.substring(1);
                let object = JSON.parse('{"' + decodeURI(search).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}');
                let param = object[key];
                return param;
            },

            isNull: (obj) => {
                return (typeof obj != "undefined" && obj != null && obj != "") ? false : true;
            },

            getSessionId: () => {
                return document.cookie.match('nx_session=([^;]*)')[1];
            },

            replaceBrTag: (str) => {
                if (str == undefined || str == null) {
                    return "";
                }
                str = str.replace(/\r\n/ig, '<br>');
                str = str.replace(/\\n/ig, '<br>');
                str = str.replace(/\n/ig, '<br>');
                return str;
            },
            won3Comma: (str) => {
                if (Number.isInteger(str)) {
                    str = str.toString();
                }
                return (str.replace(/\B(?=(\d{3})+(?!\d))/g, ','));
            },
        }
        
        //스크롤시 햄버거 닫기 
        // didScroll = false;
        $(()=>{
            $(window).scroll(function(event){

                $('.hamburger-button.active').tigger('click');
                console.log('scroll!');
                // didScroll = true;
            });
            // var scrollInterval = setInterval(function() {
            //     if (didScroll) {
            //         hasScrolled();
            //         didScroll = false;
            //     }
            // }, 250);


        });

        // function hasScrolled() {
            // $('.hamburger-button.active').tigger('click');
        // }
    </script>